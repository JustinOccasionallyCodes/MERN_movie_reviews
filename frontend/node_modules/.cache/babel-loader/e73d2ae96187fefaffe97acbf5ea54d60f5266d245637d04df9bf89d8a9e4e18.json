{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lenovo\\\\Documents\\\\Code College\\\\MERN\\\\movie-reviews\\\\frontend\\\\src\\\\components\\\\movie.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport MovieDataService from '../services/movies';\nimport { Link } from 'react-router-dom';\nimport Card from 'react-bootstrap/Card';\nimport Container from 'react-bootstrap/Container';\nimport Image from 'react-bootstrap/Image';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport Button from 'react-bootstrap/Button';\nimport moment from 'moment';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Movie = props => {\n  _s();\n  const [movie, setMovie] = useState({\n    id: null,\n    title: \"\",\n    rated: \"\",\n    reviews: []\n  });\n  const getMovie = id => {\n    MovieDataService.get(id).then(response => {\n      setMovie(response.data);\n      console.log(response.data);\n    }).catch(e => {\n      console.log(e);\n    });\n  };\n  useEffect(() => {\n    getMovie(props.match.params.id);\n  }, [props.match.params.id]);\n  const deleteReview = (reviewId, index) => {\n    MovieDataService.deleteReview(reviewId, props.user.id).then(response => {\n      setMovie(prevState => {\n        prevState.reviews.splice(index, 1);\n        return {\n          ...prevState\n        };\n      });\n    }).catch(e => {\n      console.log(e);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Image, {\n            src: movie.poster + \"/100px250\",\n            fluid: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: [/*#__PURE__*/_jsxDEV(Card, {\n            children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n              as: \"h5\",\n              children: movie.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n              children: [/*#__PURE__*/_jsxDEV(Card.Text, {\n                children: movie.plot\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 64,\n                columnNumber: 33\n              }, this), props.user && /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/movies/\" + props.match.params.id + \"/review\",\n                children: \"Add Review\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Reviews\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 25\n          }, this), movie.reviews.map((review, index) => {\n            return /*#__PURE__*/_jsxDEV(Card, {\n              children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  children: [review.name + \" reviewed on \", \"  \", moment(review.date).format(\"Do MMMM YYYY\")]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 80,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: review.review\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 81,\n                  columnNumber: 41\n                }, this), props.user && props.user.id === review.user_id && /*#__PURE__*/_jsxDEV(Row, {\n                  children: [/*#__PURE__*/_jsxDEV(Col, {\n                    children: /*#__PURE__*/_jsxDEV(Link, {\n                      to: {\n                        pathname: \"/movies/\" + props.match.params.id + \"/review\",\n                        state: {\n                          currentReview: review\n                        }\n                      },\n                      children: \"Edit\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 84,\n                      columnNumber: 54\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 84,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      variant: \"link\",\n                      onClick: () => deleteReview(review._id, index),\n                      children: \"Delete\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 91,\n                      columnNumber: 54\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 91,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 83,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 37\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 33\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n};\n_s(Movie, \"/ac8CBAVQHyuE5DN21p+SVMN9e4=\");\n_c = Movie;\nexport default Movie;\nvar _c;\n$RefreshReg$(_c, \"Movie\");","map":{"version":3,"names":["React","useState","useEffect","MovieDataService","Link","Card","Container","Image","Col","Row","Button","moment","Movie","props","movie","setMovie","id","title","rated","reviews","getMovie","get","then","response","data","console","log","catch","e","match","params","deleteReview","reviewId","index","user","prevState","splice","poster","plot","map","review","name","date","format","user_id","pathname","state","currentReview","_id"],"sources":["C:/Users/lenovo/Documents/Code College/MERN/movie-reviews/frontend/src/components/movie.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport MovieDataService from '../services/movies'\nimport { Link } from 'react-router-dom'\n\nimport Card from 'react-bootstrap/Card';\nimport Container from 'react-bootstrap/Container';\nimport Image from 'react-bootstrap/Image';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport Button from 'react-bootstrap/Button';\n\nimport moment from 'moment';\n\nconst Movie = props => {\n\n    const [movie, setMovie] = useState({\n        id: null,\n        title: \"\",\n        rated: \"\",\n        reviews: []\n    })\n\n    const getMovie = id => {\n        MovieDataService.get(id)\n            .then(response => {\n                setMovie(response.data)\n                console.log(response.data)\n            })\n            .catch(e => {\n                console.log(e)\n            })\n    }\n\n    useEffect(() => {\n        getMovie(props.match.params.id)\n    }, [props.match.params.id])\n\n    const deleteReview = (reviewId, index) => {\n        MovieDataService.deleteReview(reviewId, props.user.id)\n            .then(response => {\n                setMovie((prevState) => {\n                    prevState.reviews.splice(index, 1)\n                    return ({\n                        ...prevState\n                    })\n                })\n            })\n            .catch(e => {\n                console.log(e)\n            })\n    }\n\n    return (\n        <div>\n            <Container>\n                <Row>\n                    <Col>\n                        <Image src={movie.poster + \"/100px250\"} fluid />\n                    </Col>\n                    <Col>\n                        <Card>\n                            <Card.Header as=\"h5\">{movie.title}</Card.Header>\n                            <Card.Body>\n                                <Card.Text>\n                                    {movie.plot}\n                                </Card.Text>\n                                {props.user &&\n                                    <Link to={\"/movies/\" + props.match.params.id + \"/review\"}>\n                                        Add Review\n                                    </Link>}\n                            </Card.Body>\n                        </Card>\n                        <br></br>\n                        <h2>Reviews</h2>\n                        <br></br>\n                        {movie.reviews.map((review, index) => {\n                            return (\n                                <Card key={index}>\n                                    <Card.Body>\n                                        <h5>{review.name + \" reviewed on \"}  {moment(review.date).format(\"Do MMMM YYYY\")}</h5>\n                                        <p>{review.review}</p>\n                                        {props.user && props.user.id === review.user_id &&\n                                            <Row>\n                                                <Col><Link to={{\n                                                    pathname: \"/movies/\" +\n                                                        props.match.params.id +\n                                                        \"/review\",\n                                                    state: { currentReview: review }\n                                                }}>Edit</Link>\n                                                </Col>\n                                                <Col><Button variant=\"link\" onClick={() => deleteReview(review._id, index)}>Delete</Button></Col>\n                                            </Row>\n                                        }\n                                    </Card.Body>\n                                </Card>\n                            )\n                        })}\n                    </Col>\n                </Row>\n            </Container>\n        </div>\n    );\n}\n\nexport default Movie;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}